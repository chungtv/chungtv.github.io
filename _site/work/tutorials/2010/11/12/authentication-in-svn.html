<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Authentication in SVN</title>
  <meta name="author" content="Chung Trịnh" />  
  
  <link rel="canonical" href="/work/tutorials/2010/11/12/authentication-in-svn.html">
  <link href="http://chungtrinh.com/feed.xml" type="application/atom+xml" rel="alternate" title="Chung Trịnh's Blog Feed">
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
   <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /> 
  
   <link rel="stylesheet" href="/css/bootstrap.min.css" /><link rel="stylesheet" href="/css/main.css" /> 
  
   <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" /><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /> 
  
  
  
  
  
  
  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="http://chungtrinh.com/img/logo.png">
  <meta name="twitter:title" content="Authentication in SVN">
  <meta name="twitter:description" content="Business Software Developer and Bloger!">
  <meta name="twitter:creator" content="@trinhvanchung">
  <!-- Open Graph -->
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Authentication in SVN">
  <meta property="og:description" content="Business Software Developer and Bloger!">
  <meta property="og:url" content="http://chungtrinh.com/work/tutorials/2010/11/12/authentication-in-svn.html/" />
    
  <meta property="og:site_name" content="Chung Trịnh's Blog">
  <meta property="og:image" content="http://chungtrinh.com/img/logo.png" />
  <!-- Icons -->
  <link rel="shortcut icon" href="http://chungtrinh.com/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="57x57" href="http://chungtrinh.com/img/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="http://chungtrinh.com/img/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="http://chungtrinh.com/img/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="http://chungtrinh.com/img/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="http://chungtrinh.com/img/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="http://chungtrinh.com/img/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="http://chungtrinh.com/img/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="http://chungtrinh.com/img/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="http://chungtrinh.com/img/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="http://chungtrinh.com/img/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="http://chungtrinh.com/img/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="http://chungtrinh.com/img/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="http://chungtrinh.com/img/android-chrome-192x192.png" sizes="192x192">
  <meta name="msapplication-square70x70logo" content="http://chungtrinh.com/img/smalltile.png" />
  <meta name="msapplication-square150x150logo" content="http://chungtrinh.com/img/mediumtile.png" />
  <meta name="msapplication-wide310x150logo" content="http://chungtrinh.com/img/widetile.png" />
  <meta name="msapplication-square310x310logo" content="http://chungtrinh.com/img/largetile.png" />
</head>


  <body>
  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://chungtrinh.com/">Chung Trịnh's Blog</a>
    </div>
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
           
        
          <li>
            
            





<a href="/">Home</a>

          </li>
        
        
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Categories</a>
            <div class="navlinks-children">
              
                
                  
            





<a href="/categories">All Categories</a>

                
              
                
                  
            





<a href="/categories#work">Works</a>

                
              
                
                  
            





<a href="/categories#life">Life</a>

                
              
                
                  
            





<a href="/categories#tutorials">Tutorials</a>

                
              
                
                  
            





<a href="/categories#tips-and-tricks">Tips & tricks</a>

                
              
            </div>
          </li>
        
        
        
          <li>
            
            





<a href="/tags">Tags</a>

          </li>
        
        
        
          <li>
            
            





<a href="/pages/tools">Tools</a>

          </li>
        
        
        
          <li>
            
            





<a href="/about">About</a>

          </li>
        
        
      </ul>
    </div>
	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://chungtrinh.com ">
	      <img class="avatar-img" src="/img/avatar.jpg" />
		</a>
	  </div>
	</div>
	
  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Authentication in SVN</h1>
		  
		  
		  
		  <span class="post-meta">Posted on November 12, 2010. Tagged:  <a href="/tags#svn"> • Svn</a><a href="/tags#source-control"> • Source control</a></span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>




<div class="container">
  <article>
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <p>Trong các bài trước, tôi đã hướng dẫn các bạn cài đặt, cấu hình đơn giản, tạo repository, sử dụng một số lệnh cơ bản của giao thức SVN để thao tác với Repository.</p>

<p>Vấn đề đặt ra là trong trường hợp dự án có nhiều thành viên tham gia, có nhiều team cùng tham gia dự án và role của mỗi team hoặc mỗi thành viên là khác nhau trên từng dự án, thậm chí trên từng thư mục con của dự án.</p>

<p>Vậy làm sao để phân quyền truy cập cho các thành viên, các team đó trong SVN.</p>

<p>Với VisualSVN, mọi việc rất dễ dàng, tuy nhiên trong bài này tôi không có ý định hướng dẫn các bạn tạo user và cấu hình xác thực trong VisualSVN. Trong phạm vi bài này, tôi sẽ giới thiệu với các bạn cách cấu hình Authentication cho các user, các team truy cập vào Repository và các dự án bằng text file.</p>

<p>Để thực hiện việc phân quyền trong SVN, các bạn sử dụng file <code class="highlighter-rouge">authz</code> trong thư mục <code class="highlighter-rouge">conf</code> của repository. Để chỉ định việc kiểm tra quyền được cấu hình trong file <code class="highlighter-rouge">authz</code>, bạn phải mở chỉ thị trong <code class="highlighter-rouge">authz-db</code> trong file <code class="highlighter-rouge">svnserve.conf</code> ra. Khi đó, bạn có được file <code class="highlighter-rouge">svnserve.conf</code> như sau:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[<span class="n">general</span>]
<span class="n">anon</span>-<span class="n">access</span> = <span class="n">read</span>
<span class="n">auth</span>-<span class="n">access</span> = <span class="n">write</span>
<span class="n">password</span>-<span class="n">db</span> = <span class="n">passwd</span>
<span class="n">authz</span>-<span class="n">db</span> = <span class="n">authz</span>
</code></pre>
</div>

<p>Để bất đầu hãy mở file <code class="highlighter-rouge">authz</code> bằng notepad và xóa trắng nó đi.</p>

<h3 id="phn-nhm-user">Phân nhóm user</h3>

<p>Trong svn, việc phân nhóm user trong file <code class="highlighter-rouge">authz</code> được thực hiện trong 1 session, dòng đầu tiên của session này là <code class="highlighter-rouge">[groups]</code>. Các dòng tiếp theo của session này là định nghĩa các nhóm tham gia vào dự án (sẽ được phân quyền để truy cập vào repository). Cấu trúc của 1 dòng như sau:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="n">group_name</span> = <span class="n">user_name1</span>, <span class="n">user_name2</span>
</code></pre>
</div>

<blockquote>
  <p><em>Các user name ngăn cách nhau bởi dấu phẩy (,) và hãy chắc chắn rằng các user này đã được tạo trong file passwd.</em></p>
</blockquote>

<p>Ví dụ, bạn tạo ra 2 nhóm tham gia dự án, khi đó session groups sẽ như sau:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    [<span class="n">groups</span>]
    <span class="n">dev_team</span> = <span class="n">dev1</span>, <span class="n">dev2</span>, <span class="n">dev3</span>
    <span class="n">test_team</span> = <span class="n">test1</span>, <span class="n">test2</span>
</code></pre>
</div>

<h3 id="phn-quyn-cho-user-hoc-nhm-user">Phân quyền cho user hoặc nhóm user</h3>

<p>Trước khi phân quyền, bạn cần biết: Trong SVN, quyền truy cập vào 1 thư mục nào đó có 2 mức: <code class="highlighter-rouge">read (r)</code> và <code class="highlighter-rouge">write(w)</code>. Việc phân quyền cho user được access vào thư mục ở quyền nào được gán bởi các ký tự đại diện <code class="highlighter-rouge">r</code> hoặc <code class="highlighter-rouge">w</code>.</p>

<p>Để gán quyền cho các user hoặc group access vào một thư mục nào đó trong repository, bạn hãy tạo ra 1 session với tên session là đường dẫn tới thư mục cần phân quyền <code class="highlighter-rouge">[đường dẫn]</code> (trong trường hợp phân quyền truy cập cho repository (thư mục gốc) thì tên session sẽ để trống <code class="highlighter-rouge">[/]</code>). Trong 1 file <code class="highlighter-rouge">authz</code> có thể có nhiều session phân quyền khác nhau.</p>

<p>Ngay phía dưới tên, các dòng tiếp theo trong session sẽ thể hiện quyền của user hay nhóm.</p>

<p>Ví dụ, tôi phân quyền cho user <code class="highlighter-rouge">admin</code> toàn quyền trên toàn repository này thì sử dụng thì sử dụng session <code class="highlighter-rouge">[/]</code> như sau:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[/]
<span class="n">admin</span> = <span class="n">rw</span>
</code></pre>
</div>

<p>Phân quyền cho <code class="highlighter-rouge">user1</code> có toàn quyền trên dự án <code class="highlighter-rouge">AP</code> thì như sau:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[/<span class="n">ap</span>]
<span class="n">user1</span>=<span class="n">rw</span>
</code></pre>
</div>

<p>Phân quyền cho nhóm <code class="highlighter-rouge">dev</code> đã tạo ở trên toàn quyền trên thư mục <code class="highlighter-rouge">src</code> của dự án <code class="highlighter-rouge">AP</code> và nhóm <code class="highlighter-rouge">test</code> chỉ có quyền <code class="highlighter-rouge">read</code> trên thư mục src này. (chú ý đặt đấu @ trước tên nhóm)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[/<span class="n">ap</span>/<span class="n">src</span>]
@<span class="n">dev</span>=<span class="n">rw</span>
@<span class="n">test</span>=<span class="n">r</span>
</code></pre>
</div>

<p>Phân quyền cho tất cả mọi người đều được truy cập vào thư mục <code class="highlighter-rouge">docs</code> của dự án <code class="highlighter-rouge">AP</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[/<span class="n">ap</span>/<span class="n">docs</span>]
*=<span class="n">rw</span>
</code></pre>
</div>

<p>Kết quả, file <code class="highlighter-rouge">authz</code> sẽ như sau:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[<span class="n">groups</span>]
<span class="n">dev</span>=<span class="n">dev1</span>,<span class="n">dev2</span>,<span class="n">dev3</span>
<span class="n">test</span>=<span class="n">test1</span>,<span class="n">test2</span>

[/]
<span class="n">admin</span>=<span class="n">rw</span>

[/<span class="n">ap</span>]
<span class="n">user1</span>=<span class="n">rw</span>

[/<span class="n">ap</span>/<span class="n">src</span>]
@<span class="n">dev</span>=<span class="n">rw</span>
@<span class="n">test</span>=<span class="n">r</span>

[/<span class="n">ap</span>/<span class="n">docs</span>]
*=<span class="n">rw</span>
</code></pre>
</div>

<p>Bạn hãy thử sử dụng lệnh <code class="highlighter-rouge">ls</code> để kiểm tra hiệu lực của quyền <code class="highlighter-rouge">read</code>, lệnh <code class="highlighter-rouge">mkdir</code> để kiểm tra hiệu lực của lệnh <code class="highlighter-rouge">write</code> xem sao nhé. Cách sử dụng cách lệnh thì đã được giới thiệu trong các bài trước rồi.</p>

    </div>
    </div>
  </article>
  
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
       <hr>
<h4>Share this:</h2>
<ul class="share-buttons">
  <li><a href="https://facebook.com/sharer.php?u=http://chungtrinh.com/work/tutorials/2010/11/12/authentication-in-svn.html" title="Share on Facebook" target="_blank"><i class="fa fa-facebook fa-fw"></i></a></li>
  <li><a href="https://twitter.com/intent/tweet?text=Authentication in SVN&url=http://chungtrinh.com/work/tutorials/2010/11/12/authentication-in-svn.html" target="_blank" title="Tweet"><i class="fa fa-twitter fa-fw"></i></a></li>
  <li><a href="https://plus.google.com/share?url=http://chungtrinh.com/work/tutorials/2010/11/12/authentication-in-svn.html" target="_blank" title="Share on Google+"><i class="fa fa-google-plus fa-fw"></i></a></li>
</ul>
<hr>
    </div>
  </div>
  

  
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="/work/tips%20and%20tricks/2010/11/11/ham-dem-so-ngay-thu-trong-1-khoang-thoi-gian.html" data-toggle="tooltip" data-placement="top" title="Hàm đếm số ngày thứ trong 1 khoảng thời gian">&larr; Previous Post</a>
        </li>
        
        
        <li class="next">
          <a href="/life/2010/12/02/tu-chuyen-xay-ra-o-vien-quan-y-175.html" data-toggle="tooltip" data-placement="top" title="Từ chuyện xảy ra ở viện Quân y 175">Next Post &rarr;</a>
        </li>
        
      </ul>
    </div>
  </div>

<div class="row disqus-comments">
  <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'chungtrinh';
	    // ensure that pages with query string get the same discussion
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];	    
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


  </div>
</div>

</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          <li>
            <a href="https://www.facebook.com/chungtv" title="Facebook" target="_blank">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li>
            <a href="https://github.com/chungtv" title="GitHub" target="_blank">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="https://twitter.com/trinhvanchung" title="Twitter" target="_blank">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
          <li>
            <a href="mailto:aschungtv@gmail.com" title="Email me">
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
		  
		  
		  
		  <li>
			<a href="/feed.xml" title="RSS" target="_blank">
			  <span class="fa-stack fa-lg">
				<i class="fa fa-circle fa-stack-2x"></i>
				<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
			  </span>
			</a>
		  </li>		
          		  
        </ul>
        <p class="copyright text-muted">
		  Chung Trịnh
		  &nbsp;&bull;&nbsp;
		  2016
		  
		  
		  &nbsp;&bull;&nbsp;
		  <a href="http://chungtrinh.com">chungtrinh.com</a>
		  
	    </p>
	        <!-- Please don't remove this, keep my open source work credited :) -->
		<p class="theme-by text-muted">
		  Theme by
		  <a href="http://deanattali.com/beautiful-jekyll/"  target="_blank">beautiful-jekyll</a>
		</p>
      </div>
    </div>
  </div>
</footer>

  
    <!-- everything has to be repeated twice because on 2016-02-01 GitHub pages migrated to jekyll 3; see bug https://github.com/jekyll/jekyll/issues/4439 -->











  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  




	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-62079859-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->


  
  </body>
</html>
