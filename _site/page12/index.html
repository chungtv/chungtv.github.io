<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Chung Trịnh's Blog</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Windows, MacOSX, C#, VB.NET, MS SQL Server, Blogging">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://chungtrinh.com/images/Blog-Cover-31.jpg">

<meta name="twitter:title" content="Chung Trịnh's Blog">
<meta name="twitter:description" content="Describe this nonsense.">
<meta name="twitter:creator" content="@trinhvanchung">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Chung Trịnh's Blog">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="http://chungtrinh.com/page12/">
<meta property="og:site_name" content="Chung Trịnh's Blog">





<link rel="canonical" href="http://chungtrinh.com/page12/">
<link href="http://chungtrinh.com/feed.xml" type="application/atom+xml" rel="alternate" title="Chung Trịnh's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://chungtrinh.com/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://chungtrinh.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://chungtrinh.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://chungtrinh.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://chungtrinh.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://chungtrinh.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://chungtrinh.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://chungtrinh.com/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://chungtrinh.com/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://chungtrinh.com/images/avatar.jpg" alt="Chung Trịnh photo" class="author-photo">
					<h4>Chung Trịnh</h4>
					<p>Business software Developer and Bloger.</p>
				</li>
				<li><a href="http://chungtrinh.com/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:aschungtv@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/trinhvanchung"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				
				
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://chungtrinh.com/posts/">All Posts</a></li>
				<li><a href="http://chungtrinh.com/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://chungtrinh.com/categories/#Work" >Works</a></li>
	  
	    
	    <li><a href="http://chungtrinh.com/categories/#Life" >Life</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="http://chungtrinh.com/images/Blog-Cover-31.jpg" alt="">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Chung Trịnh's Blog</h1>
      <h2></h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2010-11-12T05:00:00+07:00"><a href="http://chungtrinh.com/2010/11/12/authentication-in-svn.html">November 12, 2010</a></time></span><span class="author vcard"><span class="fn"><a href="http://chungtrinh.com/about/" title="About Chung Trịnh">Chung Trịnh</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://chungtrinh.com/2010/11/12/authentication-in-svn.html" rel="bookmark" title="Authentication in SVN" itemprop="url">Authentication in SVN</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Trong các bài trước, tôi đã hướng dẫn các bạn cài đặt, cấu hình đơn giản, tạo repository, sử dụng một số lệnh cơ bản của giao thức SVN để thao tác với Repository.</p>

<p>Vấn đề đặt ra là trong trường hợp dự án có nhiều thành viên tham gia, có nhiều team cùng tham gia dự án và role của mỗi team hoặc mỗi thành viên là khác nhau trên từng dự án, thậm chí trên từng thư mục con của dự án.</p>

<p>Vậy làm sao để phân quyền truy cập cho các thành viên, các team đó trong SVN.</p>

<p>Với VisualSVN, mọi việc rất dễ dàng, tuy nhiên trong bài này tôi không có ý định hướng dẫn các bạn tạo user và cấu hình xác thực trong VisualSVN. Trong phạm vi bài này, tôi sẽ giới thiệu với các bạn cách cấu hình Authentication cho các user, các team truy cập vào Repository và các dự án bằng text file.</p>

<p>Để thực hiện việc phân quyền trong SVN, các bạn sử dụng file <code class="highlighter-rouge">authz</code> trong thư mục <code class="highlighter-rouge">conf</code> của repository. Để chỉ định việc kiểm tra quyền được cấu hình trong file <code class="highlighter-rouge">authz</code>, bạn phải mở chỉ thị trong <code class="highlighter-rouge">authz-db</code> trong file <code class="highlighter-rouge">svnserve.conf</code> ra. Khi đó, bạn có được file <code class="highlighter-rouge">svnserve.conf</code> như sau:</p>

<p><code class="highlighter-rouge">
[general]
anon-access = read
auth-access = write
password-db = passwd
authz-db = authz
</code></p>

<p>Để bất đầu hãy mở file <code class="highlighter-rouge">authz</code> bằng notepad và xóa trắng nó đi.</p>

<h3 id="phn-nhm-user">Phân nhóm user</h3>

<p>Trong svn, việc phân nhóm user trong file <code class="highlighter-rouge">authz</code> được thực hiện trong 1 session, dòng đầu tiên của session này là <code class="highlighter-rouge">[groups]</code>. Các dòng tiếp theo của session này là định nghĩa các nhóm tham gia vào dự án (sẽ được phân quyền để truy cập vào repository). Cấu trúc của 1 dòng như sau:</p>

<p><code class="highlighter-rouge">
    group_name = user_name1, user_name2
</code>
&gt; <em>Các user name ngăn cách nhau bởi dấu phẩy (,) và hãy chắc chắn rằng các user này đã được tạo trong file passwd.</em></p>

<p>Ví dụ, bạn tạo ra 2 nhóm tham gia dự án, khi đó session groups sẽ như sau:</p>

<p><code class="highlighter-rouge">
    [groups]
    dev_team = dev1, dev2, dev3
    test_team = test1, test2
</code></p>

<h3 id="phn-quyn-cho-user-hoc-nhm-user">Phân quyền cho user hoặc nhóm user</h3>

<p>Trước khi phân quyền, bạn cần biết: Trong SVN, quyền truy cập vào 1 thư mục nào đó có 2 mức: <code class="highlighter-rouge">read (r)</code> và <code class="highlighter-rouge">write(w)</code>. Việc phân quyền cho user được access vào thư mục ở quyền nào được gán bởi các ký tự đại diện <code class="highlighter-rouge">r</code> hoặc <code class="highlighter-rouge">w</code>.</p>

<p>Để gán quyền cho các user hoặc group access vào một thư mục nào đó trong repository, bạn hãy tạo ra 1 session với tên session là đường dẫn tới thư mục cần phân quyền <code class="highlighter-rouge">[đường dẫn]</code> (trong trường hợp phân quyền truy cập cho repository (thư mục gốc) thì tên session sẽ để trống <code class="highlighter-rouge">[/]</code>). Trong 1 file <code class="highlighter-rouge">authz</code> có thể có nhiều session phân quyền khác nhau.</p>

<p>Ngay phía dưới tên, các dòng tiếp theo trong session sẽ thể hiện quyền của user hay nhóm.</p>

<p>Ví dụ, tôi phân quyền cho user <code class="highlighter-rouge">admin</code> toàn quyền trên toàn repository này thì sử dụng thì sử dụng session <code class="highlighter-rouge">[/]</code> như sau:</p>

<p><code class="highlighter-rouge">
[/]
admin = rw
</code>
Phân quyền cho <code class="highlighter-rouge">user1</code> có toàn quyền trên dự án <code class="highlighter-rouge">AP</code> thì như sau:</p>

<p><code class="highlighter-rouge">
[/ap]
user1=rw
</code></p>

<p>Phân quyền cho nhóm <code class="highlighter-rouge">dev</code> đã tạo ở trên toàn quyền trên thư mục <code class="highlighter-rouge">src</code> của dự án <code class="highlighter-rouge">AP</code> và nhóm <code class="highlighter-rouge">test</code> chỉ có quyền <code class="highlighter-rouge">read</code> trên thư mục src này. (chú ý đặt đấu @ trước tên nhóm)</p>

<p><code class="highlighter-rouge">
[/ap/src]
@dev=rw
@test=r
</code></p>

<p>Phân quyền cho tất cả mọi người đều được truy cập vào thư mục <code class="highlighter-rouge">docs</code> của dự án <code class="highlighter-rouge">AP</code>.</p>

<p><code class="highlighter-rouge">
[/ap/docs]
*=rw
</code></p>

<p>Kết quả, file <code class="highlighter-rouge">authz</code> sẽ như sau:</p>

<p>```
[groups]
dev=dev1,dev2,dev3
test=test1,test2</p>

<p>[/]
admin=rw</p>

<p>[/ap]
user1=rw</p>

<p>[/ap/src]
@dev=rw
@test=r</p>

<p>[/ap/docs]
*=rw
```</p>

<p>Bạn hãy thử sử dụng lệnh <code class="highlighter-rouge">ls</code> để kiểm tra hiệu lực của quyền <code class="highlighter-rouge">read</code>, lệnh <code class="highlighter-rouge">mkdir</code> để kiểm tra hiệu lực của lệnh <code class="highlighter-rouge">write</code> xem sao nhé. Cách sử dụng cách lệnh thì đã được giới thiệu trong các bài trước rồi.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2010-11-11T05:00:00+07:00"><a href="http://chungtrinh.com/2010/11/11/ham-dem-so-ngay-thu-trong-1-khoang-thoi-gian.html">November 11, 2010</a></time></span><span class="author vcard"><span class="fn"><a href="http://chungtrinh.com/about/" title="About Chung Trịnh">Chung Trịnh</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://chungtrinh.com/2010/11/11/ham-dem-so-ngay-thu-trong-1-khoang-thoi-gian.html" rel="bookmark" title="Hàm đếm số ngày thứ trong 1 khoảng thời gian" itemprop="url">Hàm đếm số ngày thứ trong 1 khoảng thời gian</a></h1>
    
  </header>
  <div class="entry-content">
    <blockquote>
  <p>Đôi khi mình cần phải đếm số thứ trong một khoảng thời gian nào đó. Ví dụ: Cần đếm xem trong tháng 11 có bao nhiêu ngày thứ 2, hay bao nhiêu ngày thứ 3.</p>
</blockquote>

<p><code class="highlighter-rouge">User Defined Function</code> sau đây nhận vào 3 tham số ngày bắt đầu, ngày kết thúc và ngày thứ cần đếm. Trả về số ngày thứ trong khoảng thời gian truyền vào (từ ngày bắt đầu đến ngày kết thúc)</p>

<p><code class="highlighter-rouge">sql
-- =============================================
-- Author:        Chungtv
-- Create date: 11/11/2010
-- Description:    Dem so ngay thu trong mot khoang thoi gian bat ky
-- @pBeginDate: Ngay bat dau khoang thoi gian can dem
-- @pEndDate: Ngay ket thuc khoang thoi gian can dem
-- @pWeekday: Ngay thu can dem (CN~1; Thu2~2, Thu3~3 ...)
-- Example:
--        SET DATEFORMAT DMY
--        SET DATEFIRST 1
--        PRINT [dbo].[afCountOfWeekday]('01/11/2010','30/11/2010',2)
-- =============================================
CREATE FUNCTION [dbo].[afCountOfWeekday]
(
    @pBeginDate smalldatetime,
    @pEndDate smalldatetime,
    @pWeekday int
)
RETURNS int
AS
BEGIN
    declare @iBeginWd int, @d1 int, @d2 int
    set @iBeginWd = datepart(dw,@pBeginDate)
    set @d1 = datediff(day,@pBeginDate,@pEndDate) 
    if @pWeekday &gt;= @iBeginWd
        set @d2 = @pWeekday - @iBeginWd
    else
        set @d2 = @pWeekday + 7 - @iBeginWd
    return (@d1 - @d2) / 7 + 1
END
</code></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2010-11-05T05:00:00+07:00"><a href="http://chungtrinh.com/2010/11/05/mot-so-lenh-co-ban-trong-svn.html">November 05, 2010</a></time></span><span class="author vcard"><span class="fn"><a href="http://chungtrinh.com/about/" title="About Chung Trịnh">Chung Trịnh</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://chungtrinh.com/2010/11/05/mot-so-lenh-co-ban-trong-svn.html" rel="bookmark" title="Một số lệnh cơ bản trong SVN" itemprop="url">Một số lệnh cơ bản trong SVN</a></h1>
    
  </header>
  <div class="entry-content">
    <p><img src="https://trinhvanchung.files.wordpress.com/2010/11/image_thumb.png?w=396&amp;h=58" alt="Subversion" /></p>

<p>Trong bài trước, các bạn đã cài đặt được SVN và làm quen với SVN. Trong bài này, xin giới thiệu với các bạn một số lệnh cơ bản để thao tác với SVN.</p>

<p>Bạn có thể dễ dàng thấy các lệnh được hỗ trợ trong SVN bằng cách trong của sổ Cmd, gõ dòng lệnh sau:</p>

<p><code class="highlighter-rouge">
svn help hoặc svn ?
</code></p>

<p>Một số lệnh cơ bản, ý nghĩa và cách sử dụng chúng:</p>

<p><em>Chú ý: trong cấu trúc các lệnh dưới đây tôi luôn kèm theo các tham số <code class="highlighter-rouge">Username</code> và <code class="highlighter-rouge">password</code>, tuy nhiên trên thực tế thì có những lệnh không cần, tùy vào cấu hình truy cập (bài sau sẽ nói về vấn đề này). ví dụ, trong file <code class="highlighter-rouge">svnserve.conf</code> ở bài trước, chúng ta cấu hình <code class="highlighter-rouge">nanon-access = read</code> thì thực chất trong lệnh <code class="highlighter-rouge">list</code> ở dưới không cần kèm theo tham số <code class="highlighter-rouge">username</code> và <code class="highlighter-rouge">password</code>. Tham số <code class="highlighter-rouge">username</code> và <code class="highlighter-rouge">password</code> thậm chí cũng chỉ cần gõ 1 lần ở lệnh đầu tiên, trong các lệnh tiếp theo svn sẽ tự nhận lại tham số ở lệnh trước đó.</em></p>

<h3 id="mkdir--lnh-to-th-mc">mkdir | Lệnh tạo thư mục</h3>
<p>###### Ý nghĩa
Lệnh này sử dụng để tạo thư mục trong <code class="highlighter-rouge">repository</code> của bạn. (giống lệnh MD trong Doc command)</p>

<h6 id="cu-trc-lnh">Cấu trúc lệnh</h6>

<p><code class="highlighter-rouge">
svn mkdir &lt;đường dẫn thư mục mới tạo&gt; –m &lt;Mô tả về dự án&gt; ––username &lt;username&gt; ––password &lt;password&gt;
</code></p>

<p>Trong trường hợp bạn ko gõ tham số –m, chương trình sẽ hiển thị màn hình để các bạn nhập comment vào (chương trình này được thiết lập trong biến SVN_EDITOR ở bài trước)</p>

<h6 id="v-d">Ví dụ</h6>
<ul>
  <li>Tạo dự án mới:</li>
</ul>

<p><code class="highlighter-rouge">
svn mkdir svn://localhost/as –m “Asia standard, a product of asiasoft” ––username admin ––password nimda
</code></p>

<ul>
  <li>Tạo thư mục con của dự án mới tạo:</li>
</ul>

<p>Tạo thư mục chứa Source của dự án</p>

<p><code class="highlighter-rouge">
svn mkdir svn://localhost/as/Src –m “Source code store here” ––username admin ––password nimda
</code>
Tạo thư mục chứa tài liệu
<code class="highlighter-rouge">
svn mkdir svn://localhost/as/Docs –m “Documents of project store here” ––username admin ––password nimda
</code></p>

<p>Tạo các thư mục con của thư mục chứa tài liệu</p>

<p>```
svn mkdir svn://localhost/as/Docs/TechDocs –m “Documents for Technical” ––username admin ––password nimda</p>

<p>svn mkdir svn://localhost/as/Docs/UserDocs –m “Documents for End-User” ––username admin ––password nimda
```</p>

<h3 id="delete-del-remove-rm--xa-th-mc">delete (del, remove, rm) | Xóa thư mục</h3>
<p>###### Ý nghĩa
Xóa thư mục (cái này thì giống RD trong dos command)</p>

<h6 id="cu-trc-lnh-1">Cấu trúc lệnh</h6>

<p><code class="highlighter-rouge">
svn delete &lt;đường dẫn tới thư mục cần xóa&gt; ––username &lt;username&gt; ––password &lt;password&gt;
</code>
Có thể thay thế lệnh <code class="highlighter-rouge">delete</code> bằng <code class="highlighter-rouge">del</code>, <code class="highlighter-rouge">remove</code> hoặc <code class="highlighter-rouge">rm</code></p>

<h6 id="v-d-1">Ví dụ</h6>

<p>Xóa thư mục Docs</p>

<p><code class="highlighter-rouge">
svn delete svn://localhost/as/docs ––username admin ––password nimda
</code></p>

<h3 id="list-ls--lnh-lit-k-th-mc-file">list (ls) | Lệnh liệt kê thư mục, file</h3>
<p>######Ý nghĩa</p>

<p>Dùng để liệt kê danh sách các thư mục và file bên trong thư mục đang được list (giống DIR trong Dos command)</p>

<h6 id="cu-trc-lnh-2">Cấu trúc lệnh</h6>

<p><code class="highlighter-rouge">
svn list &lt;đường dẫn đến thư mục cần xem danh sách thư mục và file&gt; ––username &lt;username&gt; ––password &lt;password&gt;
</code>
###### Ví dụ</p>

<p>Trong ví dụ này, tôi đã thử dùng SVN để liệt kê các thư mục và file bên trong dự án của nhóm <code class="highlighter-rouge">Quản lý xây dựng</code> trên google code (tại thời điểm 14h41 ngày 05/11/2010) và nhận được kết quả như sau:</p>

<p>```
C:\svn-win32-1.5.6\bin&gt;svn ls https://quanlyxaydung.googlecode.com/svn/trunk/code/</p>

<p>NhanVien/
congtrinh/
khachhang/
main/
quanlykho/
quanlyvattu/
```</p>

<p>Trong ví dụ trên, các bạn có thể thay lệnh list bằng lệnh ls</p>

<h3 id="checkout-co">checkout (co)</h3>
<p>###### Ý nghĩa
Lệnh này sử dụng để lấy phiên bản mã nguồn mới nhất từ thư mục dự án trên repository về thư mục trên máy trạm.</p>

<h6 id="cu-trc-lnh-3">Cấu trúc lệnh</h6>
<p><code class="highlighter-rouge">
svn checkout &lt;đường dẫn thư mục trên máy chủ&gt; &lt;đường dẫn thư mục trên máy trạm&gt; ––username &lt;username&gt; ––password  &lt;password&gt;
</code></p>

<p>Các bạn có thể thay thế lệnh checkout ở trên bằng lệnh co.</p>

<h6 id="v-d-2">Ví dụ</h6>

<p>Trong ví dụ này, tôi sẽ lấy mã nguồn mới nhất từ thư mục Src của dự án AS đã tạo ở trên về thư mục <code class="highlighter-rouge">D:/dev/as/src/</code> trên máy trạm.</p>

<p><code class="highlighter-rouge">
svn checkout svn://localhost/as/src d:/dev/as/src ––username admin ––password nimda
</code></p>

<p>Nếu thành công, chương trình sẽ có thông báo:</p>

<p><code class="highlighter-rouge">
Checked out revision n. //(n là số phiên bản hiện tại mới nhất)
</code></p>

<p>Trong trường hợp thư mục <code class="highlighter-rouge">d:/dev/as/src</code> chưa có, SVN sẽ tự tạo.</p>

<p><em>Phù, tạm tới đây đã. Tôi sẽ cố gắng viết tiếp để các bạn tham khảo.</em></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2010-11-04T05:00:00+07:00"><a href="http://chungtrinh.com/2010/11/04/setup-create-repository-config-create-project-create-svn-service.html">November 04, 2010</a></time></span><span class="author vcard"><span class="fn"><a href="http://chungtrinh.com/about/" title="About Chung Trịnh">Chung Trịnh</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~8 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://chungtrinh.com/2010/11/04/setup-create-repository-config-create-project-create-svn-service.html" rel="bookmark" title="Setup, create repository, config, create project, create svn service" itemprop="url">Setup, create repository, config, create project, create svn service</a></h1>
    
  </header>
  <div class="entry-content">
    <p><img src="https://trinhvanchung.files.wordpress.com/2010/11/image.png" alt="Subversion" /></p>

<h2 id="t-vn-">Đặt vấn đề</h2>
<p>Kỳ này có tham gia tại trường học phần Công cụ và môi trường Phát triển phần mềm, trong đó có giới thiệu với các bạn công cụ quản lý mã nguồn Subversion.</p>

<p>Rằng thì là chẳng bao giờ dùng SVN nên nhiều khi demo cứ hay quên mấy cái 1 trừ hay 2 trừ.  Viết cái chủ đề này phần để cho các bạn tham khảo phần để tra cứu lại khi cần thiết.</p>

<h2 id="gii-thiu-v-subversion">Giới thiệu về Subversion</h2>
<p>Anh em chịu khó wiki hay nhờ <a href="https://www.google.com/?gws_rd=ssl#q=subversion">“anh hai google”</a> cho nó rõ nghĩa nhé. Mình chỉ đại khái thôi.</p>

<p><strong>Subversion</strong> là một phần mềm cung cấp các chức năng quản lý phiên bản mã nguồn và tài liệu. Hiểu đơn giản nó cũng chỉ là một trình quản lý file, thư mục. Tuy nhiên, nó cao cấp hơn ở chỗ nó cho phép quản lý nhiều phiên bản của cùng 1 file, có thể rollback lại khi có sai sót; quản lý lịch sử sửa đổi; quản lý người dùng . Hỗ trợ giải quyết đụng độ, tranh chấp … và nhiều thứ mà nói thật mình cũng chưa tìm hiểu hết.</p>

<p>Tóm lại, anh em cứ google là ra hết hoặc là vào trang chủ của nó mà nghiên cứu <a href="http://subverion.tigris.org">http://subverion.tigris.org</a></p>

<h2 id="ci-t-svn">Cài đặt SVN</h2>
<p>### Download và cài đặt.
Download SVN tại: <a href="http://subverion.tigris.org">http://subverion.tigris.org</a> (đừng có nói là vào đó xong hổng biết download ở đâu nhé :), còn nếu không biết thật thì vào đây <a href="http://sourceforge.net/projects/win32svn/">http://sourceforge.net/projects/win32svn/</a>). Sau khi download về máy ta được file svn-win32-3.5.6.zip (phiên bản có thể khác, nhưng cách cài thì như nhau).</p>

<p>Có thể dùng VisualSVN cũng được, nhưng để hiểu rõ hơn bản chất của nó mình sẽ giới thiệu về svn-win32 và quản lý nó bằng Command-line và text file.</p>

<p>Giải nén svn-win32-3.5.6.zip vào đâu đó (trong ví dụ này mình giải nén vào ổ C), được thư mục C:\svn-win32-3.5.6\</p>

<p><img src="https://trinhvanchung.files.wordpress.com/2010/11/image1.png" alt="" /></p>

<h3 id="thit-lp-bin-mi-trng">Thiết lập biến môi trường</h3>
<p>Mục đích của việc thiết lập biến môi trường là để trên cửa sổ command có thể truy xuất trực tiếp tới các thư viện của svn mà không cần phải gõ đường dẫn.</p>

<p>Thêm các biến môi trường như sau:</p>

<ul>
  <li>Right-click lên My Computer, chọn Properties.</li>
  <li>Trong màn hình System Properties chọn tab Advanced.</li>
  <li>Trong tab Advanced Click vào nút lệnh Environtment Variables.</li>
  <li>Tại cửa sổ Environtment Variables có 2 phần (user variables và system variables).</li>
  <li>Trong phần system variables, tìm đến dòng có tên Variable là “Path”, chọn dòng đó và nhấn nút edit.  (ở đây bạn có thể thêm vào user variable hoặc system variable đều được).</li>
  <li>Sau khi nhấn nút Edit, trong màn hình Edit system variable, tại ô Variable value, bạn đưa con trỏ tới cuối ô; trong trường hợp cuối ô chưa có dấu “;” thì bạn thêm dấu “;” vào, sau đó thêm đường dẫn tới thư mục Bin của svn (thêm C:\svn-win32-1.5.6\bin). Đây là thư mục chứa các tập tin exe của svn.</li>
  <li>Tiếp theo các bạn thêm biến SVN_EDITOR bằng cách tại vùng User variables hoặc System variables trên của sổ Environment variables, nhấn nút New</li>
  <li>Trong cửa sổ New variable, thêm như hình sau, sau đó nhấn nút OK.</li>
</ul>

<p><img src="https://trinhvanchung.files.wordpress.com/2010/11/image2.png" alt="" /></p>

<h2 id="to-kho-lu-tr-ti-liu-m-ngun-repository">Tạo kho lưu trữ tài liệu, mã nguồn (Repository)</h2>
<p>Kho lưu trữ tài liệu, mã nguồn (Repository) là thư mục chứa dữ liệu về dự án của bạn và các cấu hình truy cập các dữ liệu đó.</p>

<p>Để tạo kho lưu dữ liệu, bạn sử dụng <code class="highlighter-rouge">svnadmin</code>, trong cửa sổ cmd của window, gõ lệnh sau:</p>

<p><code class="highlighter-rouge">
svnadmin create &lt;đường dẫn kho lưu&gt;
</code>
Ví dụ:
<code class="highlighter-rouge">
svnadmin create C:\ARDRepository\
</code></p>

<p>Sau khi thực hiện xong, SVN sẽ tạo ra trong ổ đĩa của bạn thư mục kho lưu (thư mục chứa dữ liệu các phiên bản tài liệu, mã nguồn, các cấu hình truy cập kho). Bên trong thư mục kho lưu, SVN đã tạo sẳn ra một số thư mục. Là người quản trị, bạn quan tâm đến thư mục Conf.</p>

<p><img src="https://trinhvanchung.files.wordpress.com/2010/11/image3.png" alt="" /></p>

<h2 id="cu-hnh-n-gin-trong-repository">Cấu hình đơn giản trong Repository</h2>

<p>Trong phạm vi bài này, tôi chỉ giới thiệu các bạn tạo user và phân quyền đơn giản cho repository. (Bài sau sẽ giới thiệu chi tiết hơn về <code class="highlighter-rouge">Authentication</code> trong SVN)</p>

<p>Như phần trên tôi đã nói, các bạn quan tâm đến thư mục <code class="highlighter-rouge">conf</code>. Trong thư mục <code class="highlighter-rouge">conf</code>, SVN đã tạo sẵn cho các bạn 3 file: <code class="highlighter-rouge">svnserve.conf</code>, <code class="highlighter-rouge">passwd</code>, <code class="highlighter-rouge">authz</code>.</p>

<p>Điều đầu tiên các bạn làm là chỉnh sửa file <code class="highlighter-rouge">svnserve.conf</code></p>

<p>Các bạn có thể đọc hoặc xóa trắng file <code class="highlighter-rouge">svnserve.conf</code> đi và cấu hình lại từ đầu (vì thực chất nó cũng đơn giản – có mấy dòng thôi).</p>

<p>Trong phạm vi bài này, bạn chỉ quan tâm đến 4 dòng sau:</p>

<p><code class="highlighter-rouge">
    [general]
    anon-access = read
    auth-access = write
    password-db = passwd
</code></p>

<ul>
  <li><strong>[general]</strong>: đánh dấu bắt đầu session</li>
  <li><strong>anon-access</strong>: Cấu hình truy cập khi truy cập vào repository lưu không xác thực (không thông qua đăng nhập username, password). Có các giá trị hiệu lực tăng dần: none, read, write (chắc ko cần nói ý nghĩa của các giá trị này nhỉ :) )</li>
  <li><strong>auth-access</strong>: Cấu hình khi truy cập vào repository có xác thực (đăng nhập bằng username, password). Các giá trị tương tự như trên</li>
  <li><strong>password-db</strong>: Tên file chứa thông tin username và password truy cập vào kho lưu. Trong trường hợp trên là file passwd (đã được svn tạo sẵn).</li>
</ul>

<p>Bạn có thể xóa trắng file <code class="highlighter-rouge">svnserve.conf</code> và copy 4 dòng trên paste vào là ok.</p>

<p><strong><em>Việc tiếp theo bạn làm là tạo ra một vài user truy cập vào repository.</em></strong>
Để tạo user truy cập vào repository, bạn mở file <code class="highlighter-rouge">passwd</code>  đã có sẵn trong thư mục <code class="highlighter-rouge">conf</code> (mở bằng trình soạn thảo văn bản) và xóa trắng đi, gõ lại từ đầu (cho nó chuyên nghiệp ;) )</p>

<p>Tạo một vài user (trong ví dụ sau tôi sẽ tạo user <code class="highlighter-rouge">admin</code> mật khẩu là <code class="highlighter-rouge">nimda</code>, <code class="highlighter-rouge">user1</code> mật khẩu <code class="highlighter-rouge">1resu</code>, <code class="highlighter-rouge">user2</code> có mật khẩu <code class="highlighter-rouge">2resu</code>
<code class="highlighter-rouge">
[users]
admin = nimda
user1 = 1resu
user2 = 2resu
</code>
Bắt đầu bằng dòng báo hiệu session cấu hình User <code class="highlighter-rouge">[users]</code>, mỗi dòng tiếp theo sẽ là <code class="highlighter-rouge">username</code> và <code class="highlighter-rouge">password</code> của mỗi user. Cấu trúc <code class="highlighter-rouge">Username = password</code></p>

<p><em>Phù, như thế là xong phần cấu hình đơn giản.</em></p>

<p>Hãy test lại xem cấu hình của bạn có OK hay không, hãy mở cmd lên, gõ lệnh sau vào để chạy <code class="highlighter-rouge">service</code> của SVN.
<code class="highlighter-rouge">
svnserve –d –r C:\ARDRepository
</code></p>

<p><kbd>Enter</kbd>, nếu không có báo gì thì là OK (đừng hụt hẫng nhé, không báo gì lại nghĩ cấu hình sai)</p>

<h2 id="to-d-n--lu-tr-trong-repository">Tạo dự án để lưu trữ trong Repository</h2>

<p>Giữ nguyên cửa sổ cmd đang chạy service SVN ở trên (đừng tắt đi nhé) và mở một cửa sổ CMD khác để thao tác với các lệnh của giao thức SVN.</p>

<p>Mở 1 cửa sở cmd khác, gõ lệnh sau để tạo mới 1 Project lưu trong <code class="highlighter-rouge">ARDRepository</code>.
<code class="highlighter-rouge">
svn mkdir svn://localhost/&lt;tên dự án&gt; –m “&lt;Mô tả thông tin về dự án&gt;” ––username  &lt;tên user&gt; ––password &lt;password&gt;
</code>
Ví dụ:
<code class="highlighter-rouge">
svn mkdir svn://localhost/AS –m “Asia Standard” ––username admin ––password nimda
</code>
Khi đó, nếu thành công bạn sẽ nhận được:
<code class="highlighter-rouge">
Committed revision 1.
</code>
Có thể không cần sử dụng tham số password
<code class="highlighter-rouge">
svn mkdir svn://localhost/AP –m “Asia Professional” ––username admin
</code>
Khi đó, sau khi <kbd>Enter</kbd>, SVN yêu cầu bạn phải nhập password cho <code class="highlighter-rouge">admin</code>, bạn nhập mật khẩu xong, nếu thành công nó cũng sẽ báo <code class="highlighter-rouge">commited</code>.</p>

<p>```
C:\Documents and Settings\Chungtv&gt;svn mkdir svn://localhost/AP –m “Asia Professional” ––username admin
Authentication realm: &lt;svn://localhost:3690&gt; 58a7a8ca-296d-2d48-a4a5-f5420ae2ca80
Password for ‘admin’: *****</p>

<p>Committed revision 2.
```</p>

<p>Kiểm tra lại danh sách dự án bạn mới tạo bằng lệnh list (hoặc ls) của SVN.
<code class="highlighter-rouge">
svn ls svn://localhost
</code></p>

<h2 id="to-service-trong-window--chy-svn-service">Tạo service trong window để chạy svn service</h2>
<p>Bước tiếp theo, các bạn tạo 1 service để chạy svn service cho repository bạn đã tạo.</p>

<p>Tại sao phải tạo service? ở bước trên, các bạn để ý là muốn sử dụng được các lệnh của giao thức <code class="highlighter-rouge">SVN (mkdir, list …)</code> thì không được tắt cửa sổ cmd đang chạy lệnh <code class="highlighter-rouge">svnserve –d –r C:\ARDRepository</code></p>

<p>Như vậy là mỗi khi khởi động lại máy chủ, muốn cho các máy trạm có thể truy cập vào repository của bạn thì bạn phải lên server và chạy lệnh đó để start service svn (bất tiện quá đúng không). Bước này, bạn sẽ tạo 1 service khởi động cùng window.</p>

<p>Bạn tắt của sổ cmd đang chạy service SVN đi để tiếp tục.</p>

<p>Để tạo service, bạn sử dụng lệnh <code class="highlighter-rouge">SC</code> (chú ý là bạn phải có quyền admin trên máy này nhé, nhất là các bạn đang dùng win7, hãy righ-click vào cmd.exe và <code class="highlighter-rouge">Run as Administrator</code> trước khi tiếp tục).</p>

<p>Trong cửa sổ cmd, bạn gõ lệnh sau để tạo service.
<code class="highlighter-rouge">
sc create &lt;ARDSVN&gt; binpath= “c:\svn-win32-3.5.6\bin\svnserve.exe ––service –r C:\ARDRepository” displayname= “ARD SVN Server” depend= TCPIP start= auto
</code></p>

<blockquote>
  <ul>
    <li><strong>ARDSVN</strong>: Tên của service.</li>
    <li><strong>binpath= “…”</strong>: Đường dẫn thực thi service và chỉ định các tham số (chú ý là sau dấu = có khoảng trắng còn trước nó thì không nhé)</li>
    <li><strong>displayname= “…”</strong>: Tên của service sẽ hiện thị trong Services Management (cũng chú ý khoảng trắng sau dấu ‘=).</li>
    <li>
      <table>
        <tbody>
          <tr>
            <td><strong>depend = TCPIP</strong>: Danh sách các service Dependencies, cần thiết để sử dụng service svn (trong trường hợp này cần phải có service TCPIP)</td>
          </tr>
        </tbody>
      </table>
    </li>
    <li><strong>start= auto</strong>: Xác định service này sẽ tự động chạy khi khởi động window.</li>
  </ul>
</blockquote>

<p>OK, nếu không có gì sai sót thì sau khi <kbd>ENTER</kbd>, bạn sẽ nhận được thông báo:</p>

<p><code class="highlighter-rouge">
[SC] CreateService SUCCESS
</code></p>

<p>Tạo xong chưa chắc đã chạy được (vì có thể cấu trúc trong binpath của bạn sau – thiếu dấu “-“ trước service chẳng hạn)</p>

<p>Bây giờ bạn thử chạy service đó lên bằng lệnh sau:</p>

<p><code class="highlighter-rouge">
sc start ARDSVN
</code></p>

<p>Nếu thành công bạn sẽ nhận được thông báo thông tin của service.</p>

<p>Trong trường hợp không thành công, bạn có thể xóa service đi bằng lệnh <code class="highlighter-rouge">sc delete ARDSVN</code> và tạo lại từ đầu.</p>

<p>Chúc các bạn thành công.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2010-10-09T05:00:00+07:00"><a href="http://chungtrinh.com/2010/10/09/loi-khi-go-bo-microsoft-office-2007.html">October 09, 2010</a></time></span><span class="author vcard"><span class="fn"><a href="http://chungtrinh.com/about/" title="About Chung Trịnh">Chung Trịnh</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://chungtrinh.com/2010/10/09/loi-khi-go-bo-microsoft-office-2007.html" rel="bookmark" title="Lỗi khi gỡ bỏ Microsoft Office 2007" itemprop="url">Lỗi khi gỡ bỏ Microsoft Office 2007</a></h1>
    
  </header>
  <div class="entry-content">
    <blockquote>
  <p><em>Đây là bài viết cũ ở <a href="https://trinhvanchung.wordpress.com/category/th%E1%BB%A7-thu%E1%BA%ADt-tin-h%E1%BB%8Dc/office/">blog của tôi trên wordpress</a>. Hôm nay chuyển sang đây luôn để tiện theo dõi.</em></p>
</blockquote>

<p>Đôi khi vì lý do gì đó mà bạn không thể gỡ được Microsoft Office 2007 (tôi gặp trên Windows 7). Mỡ office lên thì không làm gì được <em>(xem hình dưới)</em>, chỉ còn cách duy nhất là gỡ ra cài lại.
<img src="https://drive.google.com/uc?id=0B4Q9iV0ywdeRUjIxNGVZNVpyWG8" alt="Lỗi không gỡ được Office" /></p>

<p>Nhưng đến lúc gỡ ra thì cũng không gỡ được, nó báo lỗi:
&gt; Setup cannot continue because a required file is either corrupted or not available. Run Setup again from the original source disc or download location
<img src="https://drive.google.com/uc?id=0B4Q9iV0ywdeRc3RRYnJITGd6Xzg" alt="Lỗi không gỡ được Office" /></p>

<p>Sau khi mày mò tìm hiểu trên Google, thì tôi tìm được cách giải quyết như sau:</p>

<ol>
  <li><a href="http://support.microsoft.com/kb/928218/">Đây là cách giải quyết thủ công</a></li>
  <li>Còn đây, sử dụng công cụ Microsoft Fix it 50154 để giải quyết
    <ul>
      <li>Download công cụ trên tại: <a href="http://support.microsoft.com/kb/971179/">http://support.microsoft.com/kb/971179/</a></li>
      <li>Chạy file mới download về (tên file là MicrosoftFixit50154.msi)</li>
      <li>Thực hiện theo từng bước là OK</li>
    </ul>
  </li>
</ol>

<p>Chúc các bạn may mắn.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="http://chungtrinh.com/page11/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="http://chungtrinh.com">1</a></li>
    

    
    
      
      
      <li>…</li>
    

    
    
    

    
      
        
        
        
        <li><a href="http://chungtrinh.com/page10/">10</a></li>
      
    
      
        
        
        
        <li><a href="http://chungtrinh.com/page11/">11</a></li>
      
    
      
        <li><strong class="current-page">12</strong></li>
      
    
      
        
        
        
        <li><a href="http://chungtrinh.com/page13/">13</a></li>
      
    
      
        
        
        
        <li><a href="http://chungtrinh.com/page14/">14</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="http://chungtrinh.com/page17/">17</a></li>
    

    
    
      <li><a href="http://chungtrinh.com/page13/" class="btn">Next</a></li>
    
  </ul>
</div>

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Chung Trịnh. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://chungtrinh.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://chungtrinh.com/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62079859-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>